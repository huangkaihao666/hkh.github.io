(this.webpackJsonpjira=this.webpackJsonpjira||[]).push([[0],{289:function(e,t,a){},292:function(e,t){},487:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(31),c=a.n(l);a(289);const o="https://online.com",i="__auth_provider_token__",s=e=>{let{user:t}=e;return window.localStorage.setItem(i,t.token||""),t},d=async()=>window.localStorage.removeItem(i);var m=a(3);const u=(e,t)=>{const[a,r]=Object(n.useState)(e);return Object(n.useEffect)((()=>{const a=setTimeout((()=>r(e)),t);return()=>clearTimeout(a)}),[e,t]),a},b=function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];const a=Object(n.useRef)(document.title).current;Object(n.useEffect)((()=>{document.title=e}),[e]),Object(n.useEffect)((()=>()=>{t||(document.title=a)}),[t,a])},p=()=>window.location.href=window.location.origin;var E=a(8),g=a(264),v=a.n(g);const j=["data","token","headers"],h=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{data:a,token:n,headers:r}=t,l=Object(E.a)(t,j);const c=Object(m.a)({method:"GET",headers:{Authorization:n?"Bearer ".concat(n):"","Content-Type":a?"application/json":""}},l);return"GET"===c.method.toUpperCase()?e+="?".concat(v.a.stringify(a)):c.body=JSON.stringify(a||{}),window.fetch("".concat("https://online.com","/").concat(e),c).then((async e=>{if(401===e.status)return await d(),window.location.reload(),Promise.reject({message:"\u8bf7\u91cd\u65b0\u767b\u5f55"});const t=await e.json();return e.ok?t:Promise.reject(t)}))},O=()=>{const{user:e}=_();return Object(n.useCallback)((function(){for(var t=arguments.length,a=new Array(t),n=0;n<t;n++)a[n]=arguments[n];let[r,l]=a;return h(r,Object(m.a)(Object(m.a)({},l),{},{token:null===e||void 0===e?void 0:e.token}))}),[null===e||void 0===e?void 0:e.token])},f={stat:"idle",data:null,error:null},y={throwOnError:!1},C=(e,t)=>{const a=Object(m.a)(Object(m.a)({},y),t),[r,l]=Object(n.useState)(Object(m.a)(Object(m.a)({},f),e)),c=(()=>{const e=Object(n.useRef)(!1);return Object(n.useEffect)((()=>(e.current=!0,()=>{e.current=!1}))),e})(),[o,i]=Object(n.useState)((()=>()=>{})),s=Object(n.useCallback)((e=>l({data:e,stat:"success",error:null})),[]),d=Object(n.useCallback)((e=>l({error:e,stat:"error",data:null})),[]),u=Object(n.useCallback)(((e,t)=>{if(!e||!e.then)throw new Error("\u8bf7\u4f20\u5165 Promise \u7c7b\u578b\u6570\u636e");return i((()=>()=>{null!==t&&void 0!==t&&t.retry&&u(null===t||void 0===t?void 0:t.retry(),t)})),l((e=>Object(m.a)(Object(m.a)({},e),{},{stat:"loading"}))),e.then((e=>(c.current&&s(e),e))).catch((e=>(d(e),a.throwOnError?Promise.reject(e):e)))}),[a.throwOnError,c,s,d]);return Object(m.a)({isIdle:"idle"===r.stat,isLoading:"loading"===r.stat,isError:"error"===r.stat,isSuccess:"success"===r.stat,run:u,setData:s,setError:d,retry:o},r)};var k,L,I,w,x=a(29),M=a(30),T=a(176),P=a(494),S=a(71),N=a(142);const F=M.a.div(k||(k=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: ",";\n  margin-bottom: ",";\n  > * {\n    margin-top: 0 !important;\n    margin-bottom: 0 !important;\n    margin-right: ",";\n  }\n"])),(e=>e.between?"space-between":void 0),(e=>e.marginBottom+"rem"),(e=>"number"===typeof e.gap?e.gap+"rem":e.gap?"2rem":void 0)),R=M.a.div(L||(L=Object(x.a)(["\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n"]))),Z=()=>r.a.createElement(R,null,r.a.createElement(T.a,{size:"large"})),z=e=>{let{error:t}=e;return r.a.createElement(R,null,r.a.createElement(N.a,null),r.a.createElement(D,{error:t}))},D=e=>{let{error:t}=e;return(null===(a=t)||void 0===a?void 0:a.message)?r.a.createElement(P.a.Text,{type:"danger"},null===t||void 0===t?void 0:t.message):null;var a},A=Object(M.a)(S.a)(I||(I=Object(x.a)(["\n  padding: 0;\n"]))),Q=M.a.div(w||(w=Object(x.a)(["\n  padding: 3.2rem;\n  width: 100%;\n  display: flex;\n  flex-direction: column;\n"])));var Y=a(36);const B=async()=>{let e=null;const t=window.localStorage.getItem(i);if(t){e=(await h("me",{token:t})).user}return e},q=r.a.createContext(void 0);q.displayName="AuthContext";const V=e=>{let{children:t}=e;const{data:a,error:l,isLoading:c,isIdle:i,isError:m,run:u,setData:b}=C(),p=Object(Y.useQueryClient)();var E;return E=()=>{u(B())},Object(n.useEffect)((()=>{E()}),[]),i||c?r.a.createElement(Z,null):m?r.a.createElement(z,{error:l}):r.a.createElement(q.Provider,{children:t,value:{user:a,login:e=>{return(t=e,fetch("".concat(o,"/login"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((async e=>e.ok?s(await e.json()):Promise.reject(await e.json())))).then(b);var t},register:e=>{return(t=e,fetch("".concat(o,"/register"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((async e=>e.ok?s(await e.json()):Promise.reject(await e.json())))).then(b);var t},logout:()=>d().then((()=>{b(null),p.clear()}))}})},_=()=>{const e=r.a.useContext(q);if(!e)throw new Error("useAuth\u5fc5\u987b\u5728AuthProvider\u4e2d\u4f7f\u7528");return e};var H=a(496),J=a(274);const K=e=>{const t=O();return Object(Y.useQuery)(["users",e],(()=>t("users",{data:e})))};var G=a(145);const U=["value","onChange","defaultOptionName","options"],W=e=>{const{value:t,onChange:a,defaultOptionName:n,options:l}=e,c=Object(E.a)(e,U);return r.a.createElement(G.a,Object.assign({value:null!==l&&void 0!==l&&l.length?X(t):0,onChange:e=>null===a||void 0===a?void 0:a(X(e)||void 0)},c),n?r.a.createElement(G.a.Option,{value:0},n):null,null===l||void 0===l?void 0:l.map((e=>r.a.createElement(G.a.Option,{key:e.id,value:e.id},e.name))))},X=e=>isNaN(Number(e))?0:Number(e),$=e=>{const{data:t}=K();return r.a.createElement(W,Object.assign({options:t||[]},e))},ee=e=>{let{param:t,setParam:a}=e;return r.a.createElement(H.a,{style:{marginBottom:"2rem"},layout:"inline"},r.a.createElement(H.a.Item,null,r.a.createElement(J.a,{placeholder:"\u9879\u76ee\u540d",type:"text",value:t.name,onChange:e=>a(Object(m.a)(Object(m.a)({},t),{},{name:e.target.value}))})),r.a.createElement(H.a.Item,null,r.a.createElement($,{defaultOptionName:"\u8d1f\u8d23\u4eba",value:t.personId,onChange:e=>a(Object(m.a)(Object(m.a)({},t),{},{personId:e}))})))};var te=a(493),ae=a(497),ne=a(185),re=a(182),le=a(140),ce=a.n(le),oe=a(76),ie=a(499);const se=["checked","onCheckedChange"],de=e=>{let{checked:t,onCheckedChange:a}=e,n=Object(E.a)(e,se);return r.a.createElement(ie.a,Object.assign({count:1,value:t?1:0,onChange:e=>null===a||void 0===a?void 0:a(!!e)},n))},me=e=>{let{fromId:t,type:a,referenceId:n,list:r}=e;const l=[...r],c=l.findIndex((e=>e.id===t));if(!n)return be([...l],c,l.length-1);const o=l.findIndex((e=>e.id===n));return("after"===a?be:ue)([...l],c,o)},ue=(e,t,a)=>{const n=e[a],r=e.splice(t,1)[0],l=e.indexOf(n);return e.splice(l,0,r),e},be=(e,t,a)=>{const n=e[a],r=e.splice(t,1)[0],l=e.indexOf(n);return e.splice(l+1,0,r),e},pe=(e,t)=>{const a=Object(Y.useQueryClient)();return{onSuccess:()=>a.invalidateQueries(e),async onMutate(n){const r=a.getQueryData(e);return a.setQueryData(e,(e=>t(n,e))),{previousItems:r}},onError(t,n,r){a.setQueryData(e,r.previousItems)}}},Ee=e=>pe(e,((e,t)=>(null===t||void 0===t?void 0:t.filter((t=>t.id!==e.id)))||[])),ge=e=>pe(e,((e,t)=>(null===t||void 0===t?void 0:t.map((t=>t.id===e.id?Object(m.a)(Object(m.a)({},t),e):t)))||[])),ve=e=>pe(e,((e,t)=>t?[...t,e]:[e])),je=e=>{const t=O();return Object(Y.useQuery)(["projects",e],(()=>t("projects",{data:e})))},he=e=>{const t=O();return Object(Y.useMutation)((e=>t("projects/".concat(e.id),{method:"PATCH",data:e})),ge(e))},Oe=e=>{const t=O();return Object(Y.useMutation)((e=>t("projects",{data:e,method:"POST"})),ve(e))},fe=e=>{const t=O();return Object(Y.useQuery)(["project",{id:e}],(()=>t("projects/".concat(e))),{enabled:Boolean(e)})},ye=e=>{const[t]=Object(oe.c)(),a=Ce();return[Object(n.useMemo)((()=>((e,t)=>{const a=Object.entries(e).filter((e=>{let[a]=e;return t.includes(a)}));return Object.fromEntries(a)})(Object.fromEntries(t),e)),[t]),e=>a(e)]},Ce=()=>{const[e,t]=Object(oe.c)();return a=>{const n=(e=>{const t=Object(m.a)({},e);return Object.keys(e).forEach((a=>{var n;(void 0===(n=e[a])||null===n||""===n)&&delete t[a]})),t})(Object(m.a)(Object(m.a)({},Object.fromEntries(e)),a));return t(n)}},ke=()=>{const[e,t]=ye(["name","personId"]);return[Object(n.useMemo)((()=>Object(m.a)(Object(m.a)({},e),{},{personId:Number(e.personId)||void 0})),[e]),t]},Le=()=>{const[{projectCreate:e},t]=ye(["projectCreate"]),[{editingProjectId:a},n]=ye(["editingProjectId"]),r=Ce(),{data:l,isLoading:c}=fe(Number(a));return{projectModalOpen:"true"===e||Boolean(a),open:()=>t({projectCreate:!0}),close:()=>r({projectCreate:"",editingProjectId:""}),startEdit:e=>n({editingProjectId:e}),editingProject:l,isLoading:c}},Ie=()=>{const[e]=ke();return["projects",e]},we=["users"],xe=e=>{let{users:t}=e,a=Object(E.a)(e,we);const{mutate:n}=he(Ie());return r.a.createElement(te.a,Object.assign({rowKey:"id",pagination:!1,columns:[{title:r.a.createElement(de,{checked:!0,disabled:!0}),render(e,t){return r.a.createElement(de,{checked:t.pin,onCheckedChange:(a=t.id,e=>n({id:a,pin:e}))});var a}},{title:"\u540d\u79f0",sorter:(e,t)=>e.name.localeCompare(t.name),render:(e,t)=>r.a.createElement(oe.b,{to:String(t.id)},t.name)},{title:"\u90e8\u95e8",dataIndex:"organization"},{title:"\u8d1f\u8d23\u4eba",render(e,a){var n;return r.a.createElement("span",null,(null===(n=t.find((e=>e.id===a.personId)))||void 0===n?void 0:n.name)||"\u672a\u77e5")}},{title:"\u521b\u5efa\u65f6\u95f4",render:(e,t)=>r.a.createElement("span",null,t.created?ce()(t.created).format("YYYY-MM-DD"):"\u65e0")},{render:(e,t)=>r.a.createElement(Me,{project:t})}]},a))},Me=e=>{let{project:t}=e;const{startEdit:a}=Le(),{mutate:n}=(e=>{const t=O();return Object(Y.useMutation)((e=>{let{id:a}=e;return t("projects/".concat(a),{method:"DELETE"})}),Ee(e))})(Ie());return r.a.createElement(ne.a,{overlay:r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{onClick:(l=t.id,()=>a(l)),key:"edit"},"\u7f16\u8f91"),r.a.createElement(re.a.Item,{onClick:()=>(e=>{ae.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u8fd9\u4e2a\u9879\u76ee\u5417?",content:"\u70b9\u51fb\u786e\u5b9a\u5220\u9664",okText:"\u786e\u5b9a",onOk(){n({id:e})}})})(t.id),key:"delete"},"\u5220\u9664"))},r.a.createElement(A,{type:"link"},"..."));var l},Te=()=>{b("\u9879\u76ee\u5217\u8868",!1);const{open:e}=Le(),[t,a]=ke(),{isLoading:n,error:l,data:c}=je(u(t,200)),{data:o}=K();return r.a.createElement(Q,null,r.a.createElement(F,{marginBottom:2,between:!0},r.a.createElement("h1",null,"\u9879\u76ee\u5217\u8868"),r.a.createElement(A,{onClick:e,type:"link"},"\u521b\u5efa\u9879\u76ee")),r.a.createElement(ee,{users:o||[],param:t,setParam:a}),r.a.createElement(D,{error:l}),r.a.createElement(xe,{loading:n,users:o||[],dataSource:c||[]}))};var Pe,Se;Te.whyDidYouRender=!1;const Ne=["title","titleId"];function Fe(){return Fe=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)({}).hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},Fe.apply(null,arguments)}function Re(e,t){let{title:a,titleId:r}=e,l=function(e,t){if(null==e)return{};var a,n,r=function(e,t){if(null==e)return{};var a={};for(var n in e)if({}.hasOwnProperty.call(e,n)){if(t.includes(n))continue;a[n]=e[n]}return a}(e,t);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(e);for(n=0;n<l.length;n++)a=l[n],t.includes(a)||{}.propertyIsEnumerable.call(e,a)&&(r[a]=e[a])}return r}(e,Ne);return n.createElement("svg",Fe({viewBox:"0 0 179 32",xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true",className:"css-sq9aeg-Logo",ref:t,"aria-labelledby":r},l),a?n.createElement("title",{id:r},a):null,Pe||(Pe=n.createElement("defs",null,n.createElement("linearGradient",{x1:"97.6553341%",y1:"35.6591143%",x2:"37.202032%",y2:"75.4891864%",id:"uid392-1"},n.createElement("stop",{stopColor:"#0052CC",offset:"7%"}),n.createElement("stop",{stopColor:"#2684FF",offset:"100%"})),n.createElement("linearGradient",{x1:"8.43371138%",y1:"60.1495759%",x2:"64.1161517%",y2:"23.5790285%",id:"uid392-2"},n.createElement("stop",{stopColor:"#0052CC",offset:"0%"}),n.createElement("stop",{stopColor:"#2684FF",offset:"100%"})))),Se||(Se=n.createElement("g",{stroke:"none",strokeWidth:1,fillRule:"nonzero"},n.createElement("path",{d:"M11.3881081,27.9242105 C12.4881804,26.8071817 13.1062496,25.2917664 13.1062496,23.7115789 C13.1062496,22.1313915 12.4881804,20.6159762 11.3881081,19.4989474 L11.3881081,19.4989474 L3.74837838,11.7621053 L0.273513514,15.2926316 C-0.0900771727,15.6625064 -0.0900771727,16.2617042 0.273513514,16.6315789 L11.3881081,27.9242105 L11.3881081,27.9242105 Z",fill:"currentColor",fillRule:"nonzero"}),n.createElement("path",{d:"M22.5027027,15.2926316 L11.3881081,4 L11.3881081,4 L11.3539189,4.03473684 L11.3539189,4.03473684 C9.08852466,6.36456187 9.09963243,10.1156459 11.3787838,12.4315789 L19.0247297,20.1652632 L22.5027027,16.6315789 C22.8662934,16.2617042 22.8662934,15.6625064 22.5027027,15.2926316 Z",fill:"currentColor",fillRule:"nonzero"}),n.createElement("path",{d:"M11.3881081,12.4252632 C9.10895676,10.1093301 9.09784899,6.35824608 11.3632432,4.02842105 L3.43445946,12.0810526 L7.58067568,16.2936842 L11.3881081,12.4252632 Z",fill:"url(#uid392-1)",fillRule:"nonzero"}),n.createElement("path",{d:"M15.1893243,15.6368421 L11.3881081,19.4989474 C12.4881804,20.6159762 13.1062496,22.1313915 13.1062496,23.7115789 C13.1062496,25.2917664 12.4881804,26.8071817 11.3881081,27.9242105 L19.3355405,19.8494737 L15.1893243,15.6368421 Z",fill:"url(#uid392-2)",fillRule:"nonzero"}),n.createElement("path",{d:"M36.07,18.956 C36.07,20.646 35.394,21.842 33.418,21.842 C32.56,21.842 31.702,21.686 31,21.4 L31,23.662 C31.65,23.896 32.586,24.104 33.808,24.104 C37.032,24.104 38.41,21.946 38.41,18.8 L38.41,6.918 L36.07,6.918 L36.07,18.956 Z M41.894,7.568 C41.894,8.556 42.544,9.128 43.454,9.128 C44.364,9.128 45.014,8.556 45.014,7.568 C45.014,6.58 44.364,6.008 43.454,6.008 C42.544,6.008 41.894,6.58 41.894,7.568 Z M42.31,24 L44.546,24 L44.546,11 L42.31,11 L42.31,24 Z M47.926,24 L50.11,24 L50.11,16.33 C50.11,13.574 51.852,12.716 54.712,13.002 L54.712,10.818 C52.164,10.662 50.864,11.754 50.11,13.288 L50.11,11 L47.926,11 L47.926,24 Z M65.45,24 L65.45,21.66 C64.618,23.376 63.058,24.26 61.056,24.26 C57.598,24.26 55.856,21.322 55.856,17.5 C55.856,13.834 57.676,10.74 61.316,10.74 C63.214,10.74 64.67,11.598 65.45,13.288 L65.45,11 L67.686,11 L67.686,24 L65.45,24 Z M58.092,17.5 C58.092,20.62 59.34,22.18 61.654,22.18 C63.656,22.18 65.45,20.906 65.45,18.02 L65.45,16.98 C65.45,14.094 63.812,12.82 61.914,12.82 C59.392,12.82 58.092,14.484 58.092,17.5 Z M86.926,19.294 C86.926,16.226 84.898,15.056 81.284,14.146 C78.268,13.392 77.176,12.69 77.176,11.286 C77.176,9.726 78.502,8.946 80.738,8.946 C82.506,8.946 84.352,9.258 86.068,10.246 L86.068,7.906 C84.898,7.256 83.312,6.658 80.842,6.658 C76.864,6.658 74.836,8.634 74.836,11.286 C74.836,14.094 76.552,15.42 80.4,16.356 C83.65,17.136 84.586,17.942 84.586,19.45 C84.586,20.958 83.624,21.972 81.05,21.972 C78.788,21.972 76.344,21.374 74.758,20.542 L74.758,22.934 C76.084,23.61 77.618,24.26 80.92,24.26 C85.158,24.26 86.926,22.258 86.926,19.294 Z M95.09,24.26 C91.19,24.26 88.902,21.374 88.902,17.474 C88.902,13.574 91.19,10.74 95.09,10.74 C98.964,10.74 101.226,13.574 101.226,17.474 C101.226,21.374 98.964,24.26 95.09,24.26 Z M95.09,12.82 C92.308,12.82 91.086,15.004 91.086,17.474 C91.086,19.944 92.308,22.18 95.09,22.18 C97.846,22.18 99.042,19.944 99.042,17.474 C99.042,15.004 97.846,12.82 95.09,12.82 Z M106.92,9.622 C106.92,8.452 107.596,7.646 108.974,7.646 C109.494,7.646 109.988,7.698 110.378,7.776 L110.378,5.722 C109.988,5.618 109.546,5.514 108.87,5.514 C106.088,5.514 104.736,7.152 104.736,9.57 L104.736,11 L102.63,11 L102.63,13.08 L104.736,13.08 L104.736,24 L106.92,24 L106.92,13.08 L110.274,13.08 L110.274,11 L106.92,11 L106.92,9.622 Z M115.786,19.892 L115.786,13.08 L119.244,13.08 L119.244,11 L115.786,11 L115.786,8.244 L113.602,8.244 L113.602,11 L111.496,11 L111.496,13.08 L113.602,13.08 L113.602,19.944 C113.602,22.362 114.954,24 117.736,24 C118.412,24 118.854,23.896 119.244,23.792 L119.244,21.634 C118.854,21.712 118.36,21.816 117.84,21.816 C116.462,21.816 115.786,21.036 115.786,19.892 Z M125.432,24 L128.292,24 L130.528,17.708 L131.724,13.704 L132.92,17.708 L135.156,24 L138.016,24 L142.8,11 L140.33,11 L136.586,22.024 L132.79,11 L130.658,11 L126.862,22.024 L123.118,11 L120.648,11 L125.432,24 Z M153.538,24 L153.538,21.66 C152.706,23.376 151.146,24.26 149.144,24.26 C145.686,24.26 143.944,21.322 143.944,17.5 C143.944,13.834 145.764,10.74 149.404,10.74 C151.302,10.74 152.758,11.598 153.538,13.288 L153.538,11 L155.774,11 L155.774,24 L153.538,24 Z M146.18,17.5 C146.18,20.62 147.428,22.18 149.742,22.18 C151.744,22.18 153.538,20.906 153.538,18.02 L153.538,16.98 C153.538,14.094 151.9,12.82 150.002,12.82 C147.48,12.82 146.18,14.484 146.18,17.5 Z M159.154,24 L161.338,24 L161.338,16.33 C161.338,13.574 163.08,12.716 165.94,13.002 L165.94,10.818 C163.392,10.662 162.092,11.754 161.338,13.288 L161.338,11 L159.154,11 L159.154,24 Z M178.108,23.48 C177.042,24.052 175.404,24.26 174.078,24.26 C169.216,24.26 167.084,21.452 167.084,17.474 C167.084,13.548 169.268,10.74 173.22,10.74 C177.224,10.74 178.836,13.522 178.836,17.474 L178.836,18.488 L169.346,18.488 C169.658,20.698 171.088,22.128 174.156,22.128 C175.664,22.128 176.938,21.842 178.108,21.426 L178.108,23.48 Z M173.116,12.768 C170.75,12.768 169.554,14.302 169.32,16.564 L176.574,16.564 C176.444,14.146 175.352,12.768 173.116,12.768 Z",fill:"inherit",fillRule:"evenodd"}))))}const Ze=n.forwardRef(Re);a.p;var ze=a(11);const De=e=>{const t=O();return Object(Y.useQuery)(["tasks",e],(()=>t("tasks",{data:e})))},Ae=e=>{const t=O();return Object(Y.useMutation)((e=>t("tasks/reorder",{data:e,method:"POST"})),(e=>pe(e,((e,t)=>me(Object(m.a)({list:t},e)).map((t=>t.id===e.fromId?Object(m.a)(Object(m.a)({},t),{},{kanbanId:e.toKanbanId}):t)))))(e))},Qe=()=>{var e;const{pathname:t}=Object(ze.o)(),a=null===(e=t.match(/projects\/(\d+)/))||void 0===e?void 0:e[1];return Number(a)},Ye=()=>fe(Qe()),Be=()=>({projectId:Qe()}),qe=()=>["kanbans",Be()],Ve=()=>{const[e]=ye(["name","typeId","processorId","tagId"]),t=Qe(),a=u(e.name,200);return Object(n.useMemo)((()=>({projectId:t,typeId:Number(e.typeId)||void 0,processorId:Number(e.processorId)||void 0,tagId:Number(e.tagId)||void 0,name:a})),[t,e,a])},_e=()=>["tasks",Ve()],He=()=>{const[{editingTaskId:e},t]=ye(["editingTaskId"]),{data:a,isLoading:r}=(e=>{const t=O();return Object(Y.useQuery)(["task",{id:e}],(()=>t("tasks/".concat(e))),{enabled:Boolean(e)})})(Number(e));return{editingTaskId:e,editingTask:a,startEdit:Object(n.useCallback)((e=>{t({editingTaskId:e})}),[t]),close:Object(n.useCallback)((()=>{t({editingTaskId:""})}),[t]),isLoading:r}},Je=()=>{const e=O();return Object(Y.useQuery)(["taskTypes"],(()=>e("taskTypes")))};var Ke=a.p+"static/media/task.8118694e.svg",Ge=a.p+"static/media/bug.bc7dca9d.svg",Ue=a(495);const We=e=>{let{kanbanId:t}=e;const[a,l]=Object(n.useState)(""),{mutateAsync:c}=(e=>{const t=O();return Object(Y.useMutation)((e=>t("tasks",{data:e,method:"POST"})),ve(e))})(_e()),o=Qe(),[i,s]=Object(n.useState)(!1),d=()=>s((e=>!e));return Object(n.useEffect)((()=>{i||l("")}),[i]),i?r.a.createElement(Ue.a,null,r.a.createElement(J.a,{onBlur:d,placeholder:"\u9700\u8981\u505a\u4e9b\u4ec0\u4e48",autoFocus:!0,onPressEnter:async()=>{await c({projectId:o,name:a,kanbanId:t}),s(!1),l("")},value:a,onChange:e=>l(e.target.value)})):r.a.createElement("div",{onClick:d},"+\u521b\u5efa\u4e8b\u52a1")},Xe=e=>{let{name:t,keyword:a}=e;if(!a)return r.a.createElement(r.a.Fragment,null,t);const n=t.split(a);return r.a.createElement(r.a.Fragment,null,n.map(((e,t)=>r.a.createElement("span",{key:t},e,t===n.length-1?null:r.a.createElement("span",{style:{color:"#257AFD"}},a)))))},$e=e=>{const t=O();return Object(Y.useQuery)(["kanbans",e],(()=>t("kanbans",{data:e})))},et=e=>{const t=O();return Object(Y.useMutation)((e=>t("kanbans/reorder",{data:e,method:"POST"})),(e=>pe(e,((e,t)=>me(Object(m.a)({list:t},e)))))(e))};var tt=a(141);const at=["children"],nt=["children"],rt=["children"],lt=e=>{let{children:t}=e,a=Object(E.a)(e,at);return r.a.createElement(tt.c,a,(e=>r.a.isValidElement(t)?r.a.cloneElement(t,Object(m.a)(Object(m.a)({},e.droppableProps),{},{ref:e.innerRef,provided:e})):r.a.createElement("div",null)))},ct=r.a.forwardRef(((e,t)=>{var a;let{children:n}=e,l=Object(E.a)(e,nt);return r.a.createElement("div",Object.assign({ref:t},l),n,null===(a=l.provided)||void 0===a?void 0:a.placeholder)})),ot=e=>{let{children:t}=e,a=Object(E.a)(e,rt);return r.a.createElement(tt.b,a,(e=>r.a.isValidElement(t)?r.a.cloneElement(t,Object(m.a)(Object(m.a)(Object(m.a)({},e.draggableProps),e.dragHandleProps),{},{ref:e.innerRef})):r.a.createElement("div",null)))};var it,st;const dt=["kanban"],mt=e=>{var t;let{id:a}=e;const{data:n}=Je(),l=null===n||void 0===n||null===(t=n.find((e=>e.id===a)))||void 0===t?void 0:t.name;return l?r.a.createElement("img",{alt:"task-icon",src:"task"===l?Ke:Ge}):null},ut=e=>{let{task:t}=e;const{startEdit:a}=He(),{name:n}=Ve();return r.a.createElement(Ue.a,{onClick:()=>a(t.id),style:{marginBottom:"0.5rem",cursor:"pointer"},key:t.id},r.a.createElement("p",null,r.a.createElement(Xe,{keyword:n,name:t.name})),r.a.createElement(mt,{id:t.typeId}))},bt=r.a.forwardRef(((e,t)=>{let{kanban:a}=e,n=Object(E.a)(e,dt);const{data:l}=De(Ve()),c=null===l||void 0===l?void 0:l.filter((e=>e.kanbanId===a.id));return r.a.createElement(Et,Object.assign({},n,{ref:t}),r.a.createElement(F,{between:!0},r.a.createElement("h3",null,a.name),r.a.createElement(pt,{kanban:a,key:a.id})),r.a.createElement(gt,null,r.a.createElement(lt,{type:"ROW",direction:"vertical",droppableId:String(a.id)},r.a.createElement(ct,{style:{minHeight:"1rem"}},null===c||void 0===c?void 0:c.map(((e,t)=>r.a.createElement(ot,{key:e.id,index:t,draggableId:"task"+e.id},r.a.createElement("div",null,r.a.createElement(ut,{key:e.id,task:e}))))))),r.a.createElement(We,{kanbanId:a.id})))})),pt=e=>{let{kanban:t}=e;const{mutateAsync:a}=(e=>{const t=O();return Object(Y.useMutation)((e=>{let{id:a}=e;return t("kanbans/".concat(a),{method:"DELETE"})}),Ee(e))})(qe()),n=r.a.createElement(re.a,null,r.a.createElement(re.a.Item,null,r.a.createElement(S.a,{type:"link",onClick:()=>{ae.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u5220\u9664\u770b\u677f\u5417",onOk:()=>a({id:t.id})})}},"\u5220\u9664")));return r.a.createElement(ne.a,{overlay:n},r.a.createElement(S.a,{type:"link"},"..."))},Et=M.a.div(it||(it=Object(x.a)(["\n  min-width: 27rem;\n  border-radius: 6px;\n  background-color: rgb(244, 245, 247);\n  display: flex;\n  flex-direction: column;\n  padding: 0.7rem 0.7rem 1rem;\n  margin-right: 1.5rem;\n"]))),gt=M.a.div(st||(st=Object(x.a)(["\n  overflow: scroll;\n  flex: 1;\n\n  ::-webkit-scrollbar {\n    display: none;\n  }\n"]))),vt=e=>{const{data:t}=Je();return r.a.createElement(W,Object.assign({options:t||[]},e))},jt=()=>{const e=Ve(),t=Ce();return r.a.createElement(F,{marginBottom:4,gap:!0},r.a.createElement(J.a,{style:{width:"20rem"},placeholder:"\u4efb\u52a1\u540d",value:e.name,onChange:e=>t({name:e.target.value})}),r.a.createElement($,{defaultOptionName:"\u7ecf\u529e\u4eba",value:e.processorId,onChange:e=>t({processorId:e})}),r.a.createElement(vt,{defaultOptionName:"\u7c7b\u578b",value:e.typeId,onChange:e=>t({typeId:e})}),r.a.createElement(S.a,{onClick:()=>{t({typeId:void 0,processorId:void 0,tagId:void 0,name:void 0})}},"\u6e05\u9664\u7b5b\u9009\u5668"))},ht=()=>{const[e,t]=Object(n.useState)(""),a=Qe(),{mutateAsync:l}=(e=>{const t=O();return Object(Y.useMutation)((e=>t("kanbans",{data:e,method:"POST"})),ve(e))})(qe());return r.a.createElement(Et,null,r.a.createElement(J.a,{size:"large",placeholder:"\u65b0\u5efa\u770b\u677f\u540d\u79f0",onPressEnter:async()=>{await l({name:e,projectId:a}),t("")},value:e,onChange:e=>t(e.target.value)}))};var Ot=a(207);const ft={labelCol:{span:8},wrapperCol:{span:16}},yt=()=>{const[e]=Object(Ot.a)(),{editingTaskId:t,editingTask:a,close:l}=He(),{mutateAsync:c,isLoading:o}=(e=>{const t=O();return Object(Y.useMutation)((e=>t("tasks/".concat(e.id),{method:"PATCH",data:e})),ge(e))})(_e()),{mutate:i}=(e=>{const t=O();return Object(Y.useMutation)((e=>{let{id:a}=e;return t("tasks/".concat(a),{method:"DELETE"})}),Ee(e))})(_e());return Object(n.useEffect)((()=>{e.setFieldsValue(a)}),[e,a]),r.a.createElement(ae.a,{forceRender:!0,onCancel:()=>{l(),e.resetFields()},onOk:async()=>{await c(Object(m.a)(Object(m.a)({},a),e.getFieldsValue())),l()},okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",confirmLoading:o,title:"\u7f16\u8f91\u4efb\u52a1",visible:!!t},r.a.createElement(H.a,Object.assign({},ft,{initialValues:a,form:e}),r.a.createElement(H.a.Item,{label:"\u4efb\u52a1\u540d",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u540d"}]},r.a.createElement(J.a,null)),r.a.createElement(H.a.Item,{label:"\u7ecf\u529e\u4eba",name:"processorId"},r.a.createElement($,{defaultOptionName:"\u7ecf\u529e\u4eba"})),r.a.createElement(H.a.Item,{label:"\u7c7b\u578b",name:"typeId"},r.a.createElement(vt,null))),r.a.createElement("div",{style:{textAlign:"right"}},r.a.createElement(S.a,{onClick:()=>{l(),ae.a.confirm({okText:"\u786e\u5b9a",cancelText:"\u53d6\u6d88",title:"\u786e\u5b9a\u5220\u9664\u4efb\u52a1\u5417",onOk:()=>i({id:Number(t)})})},style:{fontSize:"14px"},size:"small"},"\u5220\u9664")))};var Ct;const kt=()=>{b("\u770b\u677f\u5217\u8868");const{data:e}=Ye(),{data:t,isLoading:a}=$e(Be()),{isLoading:n}=De(Ve()),l=n||a,c=Lt();return r.a.createElement(tt.a,{onDragEnd:c},r.a.createElement(Q,null,r.a.createElement("h1",null,null===e||void 0===e?void 0:e.name,"\u770b\u677f"),r.a.createElement(jt,null),l?r.a.createElement(T.a,{size:"large"}):r.a.createElement(It,null,r.a.createElement(lt,{type:"COLUMN",direction:"horizontal",droppableId:"kanban"},r.a.createElement(ct,{style:{display:"flex"}},null===t||void 0===t?void 0:t.map(((e,t)=>r.a.createElement(ot,{key:e.id,draggableId:"kanban"+e.id,index:t},r.a.createElement(bt,{kanban:e,key:e.id})))))),r.a.createElement(ht,null)),r.a.createElement(yt,null)))},Lt=()=>{const{data:e}=$e(Be()),{mutate:t}=et(qe()),{mutate:a}=Ae(_e()),{data:r=[]}=De(Ve());return Object(n.useCallback)((n=>{let{source:l,destination:c,type:o}=n;if(c){if("COLUMN"===o){const a=null===e||void 0===e?void 0:e[l.index].id,n=null===e||void 0===e?void 0:e[c.index].id;if(!a||!n||a===n)return;const r=c.index>l.index?"after":"before";t({fromId:a,referenceId:n,type:r})}if("ROW"===o){const e=+l.droppableId,t=+c.droppableId;if(e===t)return;const n=r.filter((t=>t.kanbanId===e))[l.index],o=r.filter((e=>e.kanbanId===t))[c.index];if((null===n||void 0===n?void 0:n.id)===(null===o||void 0===o?void 0:o.id))return;a({fromId:null===n||void 0===n?void 0:n.id,referenceId:null===o||void 0===o?void 0:o.id,fromKanbanId:e,toKanbanId:t,type:e===t&&c.index>l.index?"after":"before"})}}}),[e,t,r,a])},It=Object(M.a)("div")(Ct||(Ct=Object(x.a)(["\n  display: flex;\n  overflow-x: scroll;\n  flex: 1;\n"])));var wt=a(500);const xt=()=>({projectId:Qe()}),Mt=()=>["epics",xt()];var Tt,Pt=a(498);const St=e=>{const{mutate:t,isLoading:a,error:l}=(e=>{const t=O();return Object(Y.useMutation)((e=>t("epics",{data:e,method:"POST"})),ve(e))})(Mt()),[c]=Object(Ot.a)(),o=Qe();return Object(n.useEffect)((()=>{c.resetFields()}),[c,e.visible]),r.a.createElement(Pt.a,{visible:e.visible,onClose:e.onClose,forceRender:!0,destroyOnClose:!0,width:"100%"},r.a.createElement(Nt,null,a?r.a.createElement(T.a,{size:"large"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,"\u521b\u5efa\u4efb\u52a1\u7ec4"),r.a.createElement(D,{error:l}),r.a.createElement(H.a,{form:c,layout:"vertical",style:{width:"40rem"},onFinish:async a=>{await t(Object(m.a)(Object(m.a)({},a),{},{projectId:o})),e.onClose()}},r.a.createElement(H.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4\u540d"}]},r.a.createElement(J.a,{placeholder:"\u8bf7\u8f93\u5165\u4efb\u52a1\u7ec4\u540d\u79f0"})),r.a.createElement(H.a.Item,{style:{textAlign:"right"}},r.a.createElement(S.a,{loading:a,type:"primary",htmlType:"submit"},"\u63d0\u4ea4"))))))},Nt=M.a.div(Tt||(Tt=Object(x.a)(["\n  height: 80vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"]))),Ft=()=>{const{data:e}=Ye(),{data:t}=(e=>{const t=O();return Object(Y.useQuery)(["epics",e],(()=>t("epics",{data:e})))})(xt()),{data:a}=De({projectId:null===e||void 0===e?void 0:e.id}),{mutate:l}=(e=>{const t=O();return Object(Y.useMutation)((e=>{let{id:a}=e;return t("epics/".concat(a),{method:"DELETE"})}),Ee(e))})(Mt()),[c,o]=Object(n.useState)(!1);return r.a.createElement(Q,null,r.a.createElement(F,{between:!0},r.a.createElement("h1",null,null===e||void 0===e?void 0:e.name,"\u4efb\u52a1\u7ec4"),r.a.createElement(S.a,{onClick:()=>o(!0),type:"link"},"\u521b\u5efa\u4efb\u52a1\u7ec4")),r.a.createElement(wt.b,{style:{overflow:"scroll"},dataSource:t,itemLayout:"vertical",renderItem:t=>r.a.createElement(wt.b.Item,null,r.a.createElement(wt.b.Item.Meta,{title:r.a.createElement(F,{between:!0},r.a.createElement("span",null,t.name),r.a.createElement(S.a,{onClick:()=>(e=>{ae.a.confirm({title:"\u786e\u5b9a\u5220\u9664\u9879\u76ee\u7ec4\uff1a".concat(e.name),content:"\u70b9\u51fb\u786e\u5b9a\u5220\u9664",okText:"\u786e\u5b9a",onOk(){l({id:e.id})}})})(t),type:"link"},"\u5220\u9664")),description:r.a.createElement("div",null,r.a.createElement("div",null,"\u5f00\u59cb\u65f6\u95f4\uff1a",ce()(t.start).format("YYYY-MM-DD")),r.a.createElement("div",null,"\u7ed3\u675f\u65f6\u95f4\uff1a",ce()(t.end).format("YYYY-MM-DD")))}),r.a.createElement("div",null,null===a||void 0===a?void 0:a.filter((e=>e.epicId===t.id)).map((t=>r.a.createElement(oe.b,{to:"/projects/".concat(null===e||void 0===e?void 0:e.id,"/kanban?editingTaskId=").concat(t.id),key:t.id},t.name)))))}),r.a.createElement(St,{onClose:()=>o(!1),visible:c}))};var Rt,Zt,zt;const Dt=()=>{const e=(()=>{const e=Object(ze.o)().pathname.split("/");return e[e.length-1]})();return r.a.createElement(Yt,null,r.a.createElement(At,null,r.a.createElement(re.a,{mode:"inline",selectedKeys:[e]},r.a.createElement(re.a.Item,{key:"kanban"},r.a.createElement(oe.b,{to:"kanban"},"\u770b\u677f")),r.a.createElement(re.a.Item,{key:"epic"},r.a.createElement(oe.b,{to:"epic"},"\u4efb\u52a1\u7ec4")))),r.a.createElement(Qt,null,r.a.createElement(ze.d,null,r.a.createElement(ze.b,{path:"/kanban",element:r.a.createElement(kt,null)}),r.a.createElement(ze.b,{path:"/epic",element:r.a.createElement(Ft,null)}),r.a.createElement(ze.b,{path:"/",element:r.a.createElement(ze.a,{to:window.location.pathname+"/kanban",replace:!0})}))))},At=M.a.aside(Rt||(Rt=Object(x.a)(["\n  background-color: rgb(244, 245, 247);\n  display: flex;\n"]))),Qt=M.a.div(Zt||(Zt=Object(x.a)(["\n  box-shadow: -5px 0 5px -5px rgba(0, 0, 0, 0.1);\n  display: flex;\n  overflow: hidden;\n"]))),Yt=M.a.div(zt||(zt=Object(x.a)(["\n  display: grid;\n  grid-template-columns: 16rem 1fr;\n  width: 100%;\n"])));var Bt,qt=a(492),Vt=a(501);const _t=()=>{const{open:e}=Le(),{data:t,refetch:a}=je(),n=null===t||void 0===t?void 0:t.filter((e=>e.pin)),l=r.a.createElement(Ht,null,r.a.createElement(P.a.Text,{type:"secondary"},"\u6536\u85cf\u9879\u76ee"),r.a.createElement(wt.b,null,null===n||void 0===n?void 0:n.map((e=>r.a.createElement(wt.b.Item,{key:e.id},r.a.createElement(wt.b.Item.Meta,{title:e.name}))))),r.a.createElement(qt.a,null),r.a.createElement(A,{onClick:e,type:"link"},"\u521b\u5efa\u9879\u76ee"));return r.a.createElement(Vt.a,{onVisibleChange:()=>a(),placement:"bottom",content:l},r.a.createElement("span",null,"\u9879\u76ee"))},Ht=M.a.div(Bt||(Bt=Object(x.a)(["\n  min-width: 30rem;\n"])));var Jt;const Kt=()=>{const{projectModalOpen:e,close:t,editingProject:a,isLoading:l}=Le(),c=a?he:Oe,{mutateAsync:o,error:i,isLoading:s}=c(Ie()),[d]=Object(Ot.a)(),u=a?"\u7f16\u8f91\u9879\u76ee":"\u521b\u5efa\u9879\u76ee";return Object(n.useEffect)((()=>{d.setFieldsValue(a)}),[a,d]),r.a.createElement(Pt.a,{forceRender:!0,onClose:()=>{d.resetFields(),t()},visible:e,width:"100%"},r.a.createElement(Gt,null,l?r.a.createElement(T.a,{size:"large"}):r.a.createElement(r.a.Fragment,null,r.a.createElement("h1",null,u),r.a.createElement(D,{error:i}),r.a.createElement(H.a,{form:d,layout:"vertical",style:{width:"40rem"},onFinish:e=>{o(Object(m.a)(Object(m.a)({},a),e)).then((()=>{d.resetFields(),t()}))}},r.a.createElement(H.a.Item,{label:"\u540d\u79f0",name:"name",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d"}]},r.a.createElement(J.a,{placeholder:"\u8bf7\u8f93\u5165\u9879\u76ee\u540d\u79f0"})),r.a.createElement(H.a.Item,{label:"\u90e8\u95e8",name:"organization",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d"}]},r.a.createElement(J.a,{placeholder:"\u8bf7\u8f93\u5165\u90e8\u95e8\u540d"})),r.a.createElement(H.a.Item,{label:"\u8d1f\u8d23\u4eba",name:"personId"},r.a.createElement($,{defaultOptionName:"\u8d1f\u8d23\u4eba"})),r.a.createElement(H.a.Item,{style:{textAlign:"right"}},r.a.createElement(S.a,{loading:s,type:"primary",htmlType:"submit"},"\u63d0\u4ea4"))))))},Gt=M.a.div(Jt||(Jt=Object(x.a)(["\n  height: 80vh;\n  display: flex;\n  flex-direction: column;\n  justify-content: center;\n  align-items: center;\n"])));var Ut;const Wt=()=>{const{data:e,refetch:t}=K(),a=r.a.createElement(Xt,null,r.a.createElement(P.a.Text,{type:"secondary"},"\u7ec4\u5458\u5217\u8868"),r.a.createElement(wt.b,null,null===e||void 0===e?void 0:e.map((e=>r.a.createElement(wt.b.Item,{key:e.id},r.a.createElement(wt.b.Item.Meta,{title:e.name}))))),r.a.createElement(qt.a,null));return r.a.createElement(Vt.a,{onVisibleChange:()=>t(),placement:"bottom",content:a},r.a.createElement("span",null,"\u7ec4\u5458"))},Xt=M.a.div(Ut||(Ut=Object(x.a)(["\n  min-width: 30rem;\n"])));var $t,ea,ta,aa,na;const ra=()=>{const[e,t]=Object(n.useState)(!1);return r.a.createElement(oa,null,r.a.createElement(oe.a,null,r.a.createElement(la,null),r.a.createElement(ma,null,r.a.createElement(ze.d,null,r.a.createElement(ze.b,{path:"/",element:r.a.createElement(ze.a,{to:"/projects"})}),r.a.createElement(ze.b,{path:"/projects",element:r.a.createElement(Te,null)}),r.a.createElement(ze.b,{path:"/projects/:projectId/*",element:r.a.createElement(Dt,null)}))),r.a.createElement(Kt,{projectModalOpen:e,onClose:()=>t(!1)})))},la=()=>r.a.createElement(ia,{between:!0},r.a.createElement(sa,{gap:!0},r.a.createElement(A,{type:"link",onClick:p},r.a.createElement(Ze,{width:"18rem",color:"rgb(38, 132, 255)"})),r.a.createElement(_t,null),r.a.createElement(Wt,null)),r.a.createElement(da,null,r.a.createElement(ca,null))),ca=()=>{const{logout:e,user:t}=_();return r.a.createElement(ne.a,{overlay:r.a.createElement(re.a,null,r.a.createElement(re.a.Item,{key:"logout"},r.a.createElement(S.a,{onClick:e,type:"link"},"\u767b\u51fa")))},r.a.createElement(S.a,{type:"link",onClick:e=>e.preventDefault()},"Hi, ",null===t||void 0===t?void 0:t.name))},oa=M.a.div($t||($t=Object(x.a)(["\n  display: grid;\n  grid-template-rows: 6rem 1fr;\n  height: 100vh;\n  /* grid-gap: 10rem; */\n"]))),ia=Object(M.a)(F)(ea||(ea=Object(x.a)(["\n  padding: 3.2rem;\n  box-shadow: 0 0 5px 0 rgba(0, 0, 0, 0.1);\n  z-index: 1;\n"]))),sa=Object(M.a)(F)(ta||(ta=Object(x.a)([""]))),da=M.a.div(aa||(aa=Object(x.a)([""]))),ma=M.a.main(na||(na=Object(x.a)(["\n  display: flex;\n  overflow: hidden;\n"]))),ua=["cpassword"],ba=e=>{let{onError:t}=e;const{register:a}=_(),{run:n,isLoading:l}=C(void 0,{throwOnError:!0});return r.a.createElement(H.a,{onFinish:async e=>{let{cpassword:r}=e,l=Object(E.a)(e,ua);if(r===l.password)try{await n(a(l))}catch(c){t(c)}else t(new Error("\u8bf7\u786e\u8ba4\u4e24\u6b21\u8f93\u5165\u7684\u5bc6\u7801\u76f8\u540c"))}},r.a.createElement(H.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]},r.a.createElement(J.a,{placeholder:"\u7528\u6237\u540d",type:"text",id:"username"})),r.a.createElement(H.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},r.a.createElement(J.a,{placeholder:"\u5bc6\u7801",type:"password",id:"password"})),r.a.createElement(H.a.Item,{name:"cpassword",rules:[{required:!0,message:"\u8bf7\u786e\u8ba4\u5bc6\u7801"}]},r.a.createElement(J.a,{placeholder:"\u786e\u8ba4\u5bc6\u7801",type:"password",id:"cpassword"})),r.a.createElement(H.a.Item,null,r.a.createElement(La,{loading:l,htmlType:"submit",type:"primary"},"\u6ce8\u518c")))},pa=e=>{let{onError:t}=e;const{login:a}=_(),{run:n,isLoading:l}=C(void 0,{throwOnError:!0});return r.a.createElement(H.a,{onFinish:async e=>{try{await n(a(e))}catch(r){t(r)}}},r.a.createElement(H.a.Item,{name:"username",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u7528\u6237\u540d"}]},r.a.createElement(J.a,{placeholder:"\u7528\u6237\u540d",type:"text",id:"username"})),r.a.createElement(H.a.Item,{name:"password",rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5bc6\u7801"}]},r.a.createElement(J.a,{placeholder:"\u5bc6\u7801",type:"password",id:"password"})),r.a.createElement(H.a.Item,null,r.a.createElement(La,{loading:l,htmlType:"submit",type:"primary"},"\u767b\u5f55")))};var Ea,ga,va,ja,ha,Oa,fa=a.p+"static/media/logo.8bb06c97.svg",ya=a.p+"static/media/left.e74de3ec.svg",Ca=a.p+"static/media/right.890da620.svg";const ka=()=>{const[e,t]=Object(n.useState)(!1),[a,l]=Object(n.useState)(null);return b("\u8bf7\u767b\u5f55\u6ce8\u518c\u4ee5\u7ee7\u7eed"),r.a.createElement(Ta,null,r.a.createElement(xa,null),r.a.createElement(wa,null),r.a.createElement(Ma,null,r.a.createElement(Ia,null,e?"\u8bf7\u6ce8\u518c":"\u8bf7\u767b\u5f55"),r.a.createElement(D,{error:a}),e?r.a.createElement(ba,{onError:l}):r.a.createElement(pa,{onError:l}),r.a.createElement(qt.a,null),r.a.createElement(S.a,{type:"link",onClick:()=>t(!e)},e?"\u5df2\u7ecf\u6709\u8d26\u53f7\u4e86\uff1f\u76f4\u63a5\u767b\u5f55":"\u6ca1\u6709\u8d26\u53f7\uff1f\u6ce8\u518c\u65b0\u8d26\u53f7")))},La=Object(M.a)(S.a)(Ea||(Ea=Object(x.a)(["\n  width: 100%;\n"]))),Ia=M.a.h2(ga||(ga=Object(x.a)(["\n  margin-bottom: 2.4rem;\n  color: rgb(94, 108, 132);\n"]))),wa=M.a.div(va||(va=Object(x.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background-repeat: no-repeat;\n  background-attachment: fixed;\n  background-position: left bottom, right bottom;\n  background-size: calc(((100vw - 40rem) / 2) - 3.2rem),\n    calc(((100vw - 40rem) / 2) - 3.2rem), cover;\n  background-image: url(","), url(",");\n"])),ya,Ca),xa=M.a.header(ja||(ja=Object(x.a)(["\n  background: url(",") no-repeat center;\n  padding: 5rem 0;\n  background-size: 8rem;\n  width: 100%;\n"])),fa),Ma=Object(M.a)(Ue.a)(ha||(ha=Object(x.a)(["\n  width: 40rem;\n  min-height: 56rem;\n  padding: 3.2rem 4rem;\n  border-radius: 0.3rem;\n  box-sizing: border-box;\n  box-shadow: rgba(0, 0, 0, 0.1) 0 0 10px;\n  text-align: center;\n"]))),Ta=M.a.div(Oa||(Oa=Object(x.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: center;\n  min-height: 100vh;\n"])));class Pa extends r.a.Component{constructor(){super(...arguments),this.state={error:null}}static getDerivedStateFromError(e){return{error:e}}render(){const{error:e}=this.state,{fallbackRender:t,children:a}=this.props;return e?t({error:e}):a}}var Sa=function(){const{user:e}=_();return r.a.createElement("div",{className:"App"},r.a.createElement(Pa,{fallbackRender:z},e?r.a.createElement(ra,null):r.a.createElement(ka,null)))};a(486);const Na=new Y.QueryClient,Fa=e=>{let{children:t}=e;return r.a.createElement(Y.QueryClientProvider,{client:Na},r.a.createElement(V,null,t))};Object(N.b)((()=>c.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Fa,null,r.a.createElement(N.a,null),r.a.createElement(Sa,null))),document.getElementById("root"))))}},[[487,1,2]]]);
//# sourceMappingURL=main.c896bf2d.chunk.js.map